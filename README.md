# Bitrix24 API RAG Assistant Bot

Телеграм-бот для предоставления справочной информации по документации Bitrix24 REST API. Проект реализует технологию RAG (Retrieval-Augmented Generation) с использованием инструментов Yandex Cloud.

## Стек технологий
* AI: Yandex Assistant API (интеграция через SDK)
* База данных: PostgreSQL
* ORM: SQLAlchemy
* Интерфейс: aiogram 3.x
* Парсинг: Selenium + WebDriver Manager
* Конфигурация: python-dotenv

## Функциональные возможности
* Автоматизированный парсинг: Сбор актуальных данных с сайта документации Bitrix24 и их сохранение в текстовый формат для последующей индексации.
* Интеллектуальный ассистент: Генерация ответов на основе извлеченного контекста из загруженной базы знаний документации.
* Логирование: Сохранение истории всех запросов пользователей и ответов системы в базу данных PostgreSQL.
* ORM-подход: Управление схемой данных и запросами к БД реализовано с помощью SQLAlchemy.

## Структура проекта
* main.py — точка входа, инициализация бота, обработка событий и диспетчеризация.
* modules/database_module.py — описание моделей данных SQLAlchemy и методы взаимодействия с PostgreSQL.
* modules/parser_module.py — скрипт для автоматизированного сбора данных с официального сайта документации.
* modules/yandex_assistant_module.py — интеграция с Yandex Assistant API и реализация логики RAG.
* config.py — централизованное управление настройками и переменными окружения.
* requirements.txt — список зависимостей проекта.
* .gitignore — конфигурация для исключения системных и конфиденциальных файлов из репозитория.

## Инструкция по установке и запуску

1. Клонирование проекта:
   git clone <url_репозитория>
   cd <название_папки>

2. Настройка окружения:
   Создайте файл .env в корневой директории и укажите параметры:
   * Токен Telegram бота.
   * API-ключ и Folder ID Yandex Cloud.
   * ID созданного ассистента.
   * Параметры подключения к PostgreSQL (User, Password, Host, Port, DB Name).

3. Установка зависимостей:
   pip install -r requirements.txt

4. Подготовка базы знаний:
   * Выполните запуск парсера: python modules/parser_module.py
   * Загрузите созданный файл bitrix_docs.txt в Yandex Search Index через консоль управления.
   * Привяжите созданный индекс к вашему ассистенту.

5. Запуск приложения:
   python main.py

## База данных
При запуске приложения SQLAlchemy автоматически проверяет наличие необходимых таблиц в PostgreSQL и создает их в случае отсутствия. Система регистрирует идентификатор пользователя, текст вопроса, ответ ассистента и временную метку сообщения.